{% extends "base.html" %}
{% block content %}

<div class="row">
  <div class="col-xs-9">
    {% if database.locked %}
      <button class="top-button btn btn-primary" disabled="true">Edit Database</button>
    {% else %}
      <a class="top-button btn btn-primary" href="/databases/{{ database.id }}/edit">Edit Database</a>
    {% endif %}
    <p class="lead">
      {{ phages|length }} phages, {{ database.number_of_phams }} phams
    </p>
    <p >
      {% if database.cdd_search %}
        <strong>Conserved domain search:</strong> Yes
      {% else %}
        <strong>Conserved domain search:</strong> No
      {% endif %}
    </p>
    <p>{{ database.description }}</p>
    <div class="panel panel-default">
      <div class="panel-heading">
        Connecting with Phamerator
      </div>
      <div class="panel-body">
        <p>
          In the Phamerator desktop client, add these options under preferences:
        </p>
        <dl class="dl-horizontal">
          <dt>Server</dt>
          <dd>{{ server_url }}</dd>
          <dt>Database</dt>
          <dd>{{ database.name_slug }}</dd>
        </dl>
      </div>
    </div>
    <div class="panel panel-default">
      <div class="panel-heading">
        Download database
      </div>
      <div class="panel-body">
        <p>
          <a href="{{ server_url }}/{{ sql_dump_filename }}">Click here</a> to download an SQL dump of the database.
        </p>
      </div>
    </div>
  </div>
  <div class="col-xs-3">
    <form method="post">
      <input type="hidden" name="delete" value="true"></input>
      <button type="submit" class="btn btn-danger"
        {% if database.locked %}
          disabled="true"
        {% endif %}
        >
          Delete database
      </button>
    </form>
  </div>
</div>

{% if phages|length %}
<div class="row">
  <div class="col-xs-12 col-sm-6 col-md-5 col-lg-4">
    <div class="panel panel-default ">
      <div class="panel-heading">Phages</div>
      <ul class="list-group">
        {% for phage in phages %}
        <li class="list-group-item">
          <strong>{{ phage.name }}</strong> <small>(id: {{ phage.id }}, {{ phage.genes }} genes)</small> <a class="pull-right" href={{ phage.url }}>Download</a>
        </li>
        {% endfor %}
      </ul>
    </div>
  </div>
</div>
{% endif %}

{% endblock %}
